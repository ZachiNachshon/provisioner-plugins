instructions:
  actions:
    - id: run-server-remote
      displayName: "Remote Reverse Proxy: Run"
      title: "Select a RPi node to run a reverse proxy server"
      description: "Run a reverse proxy server on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=run-server"

    - id: stop-server-remote
      displayName: "Remote Reverse Proxy: Stop"
      title: "Select a RPi node to stop a running reverse proxy server"
      description: "Stop a running reverse proxy server on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=stop-server"

    - id: check-server-remote
      displayName: "Remote Reverse Proxy: Check"
      title: "Select a RPi node to check a running reverse proxy server"
      description: "Check if there is a running reverse proxy server on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=check-server"

    - id: run-server
      displayName: "Local Reverse Proxy: Run"
      title: "Run a reverse proxy server"
      description: "Run a reverse proxy server"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --run-server

    - id: stop-server
      displayName: "Local Reverse Proxy: Stop"
      title: "Stop a reverse proxy server"
      description: "Stop a running reverse proxy server"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --stop-server

    - id: check-server
      displayName: "Local Reverse Proxy: Check"
      title: "Check for a running proxy server"
      description: "Check if there is a running reverse proxy server"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --check-server

    - id: log-server
      displayName: "Local Reverse Proxy: Log"
      title: "Log a reverse proxy server"
      description: "Show reverse proxy server logs"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --log-server

    - id: run-client-remote
      displayName: "Remote Client: Run"
      title: "Select a RPi node to run a reverse proxy client"
      description: "Run a reverse proxy client on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=run-client"

    - id: stop-client-remote
      displayName: "Remote Client: Stop"
      title: "Select a RPi node to stop a running client"
      description: "Stop a running reverse proxy client on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=stop-client"

    - id: check-client-remote
      displayName: "Remote Client: Check"
      title: "Select a RPi node to check a running client"
      description: "Check if there is a running reverse proxy client on a remote RPi node"
      showOutput: true
      scriptFile: rpi/nodes/ansible/ansible_anchor.sh "anchor rpi run proxy --action=check-client"

    - id: run-client
      displayName: "Local Client: Run"
      title: "Run a reverse proxy client"
      description: "Run a reverse proxy client"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --run-client

    - id: stop-client
      displayName: "Local Client: Stop"
      title: "Stop a reverse proxy client"
      description: "Stop a running reverse proxy client"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --stop-client

    - id: check-client
      displayName: "Local Client: Check"
      title: "Check for a running proxy client"
      description: "Check if there is a running reverse proxy client"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --check-client

    - id: log-client
      displayName: "Local Client: Log"
      title: "Log a reverse proxy client"
      description: "Show reverse proxy client logs"
      showOutput: true
      scriptFile: rpi/proxy/scripts/frp.sh --log-client

    - id: server-open-dashboard
      displayName: "Open: Reverse Proxy Server Dashboard"
      title: "Open a proxy server dashboard"
      description: "Open a browser with proxy UI dashboard"
      scriptFile: rpi/proxy/scripts/frp.sh --server-open-dashboard

    - id: client-open-admin-ui
      displayName: "Open: Client Admin UI"
      title: "Open a proxy client admin UI"
      description: "Open a browser with client admin UI"
      scriptFile: rpi/proxy/scripts/frp.sh --client-open-admin-ui

  workflows:
    - id: stop-all
      displayName: "Stop: Server/Client"
      title: "Stop reverse proxy server/client"
      description: "Stop all running reverse proxy server/client"
      tolerateFailures: true
      actionIds:
        - stop-server
        - stop-client
